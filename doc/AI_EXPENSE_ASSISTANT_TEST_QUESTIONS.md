# AI费用助手测试问题列表

## 📋 测试说明
- 测试账户：test@outlook.com / 123456
- 测试行程：选择一个有费用记录的行程进行测试
- 测试前准备：确保已选择行程，并且有一些费用记录

---

## 1. 基础功能测试

### 1.1 功能介绍查询
- [ ] **你能做些什么？**
- [ ] **介绍一下你的功能**
- [ ] **你支持哪些费用分类？**
- [ ] **如何使用你？**

**预期结果**：AI应该详细介绍其功能，包括费用管理、费用分析、预算管理等。

---

## 2. 添加费用功能测试

### 2.1 基础添加
- [ ] **添加一笔100元的交通费用，描述是地铁票**
- [ ] **帮我记录一笔200元的餐饮费用，描述是午餐**
- [ ] **添加住宿费用，金额500元，描述是酒店房费**
- [ ] **记录一笔50元的景点门票费用**

**预期结果**：AI应该触发 `add_expense` Function Call，显示确认卡片。

### 2.2 带日期添加
- [ ] **添加一笔150元的交通费用，日期是2025-11-15，描述是出租车**
- [ ] **记录一笔80元的餐饮费用，日期是今天，描述是晚餐**

**预期结果**：AI应该正确解析日期并调用工具。

### 2.3 带地点添加
- [ ] **添加一笔300元的购物费用，地点是王府井，描述是纪念品**
- [ ] **记录一笔120元的娱乐费用，地点是KTV，描述是唱歌**

**预期结果**：AI应该正确解析地点信息。

### 2.4 关联行程节点（如果有行程节点）
- [ ] **添加一笔200元的交通费用，关联到第1天的第一个节点，描述是前往景点**

**预期结果**：AI应该正确关联到行程节点。

---

## 3. 查询费用功能测试

### 3.1 按分类查询
- [ ] **查询所有交通费用**
- [ ] **显示所有餐饮费用**
- [ ] **查看住宿费用列表**
- [ ] **列出所有购物费用**

**预期结果**：AI应该触发 `get_filtered_expenses` Function Call，按分类筛选。

### 3.2 按时间区间查询
- [ ] **查询2025-11-10到2025-11-15之间的费用**
- [ ] **显示本月所有费用**
- [ ] **查看最近一周的费用记录**

**预期结果**：AI应该触发 `get_filtered_expenses` Function Call，包含时间参数。

### 3.3 组合查询
- [ ] **查询2025-11-10到2025-11-15之间的交通费用**
- [ ] **显示本月所有餐饮费用**

**预期结果**：AI应该同时使用分类和时间参数。

---

## 4. 修改费用功能测试

### 4.1 修改金额
- [ ] **修改费用ID为[某个费用ID]的记录，将金额改为150元**
- [ ] **把费用ID为[某个费用ID]的金额更新为200元**

**预期结果**：AI应该触发 `update_expense` Function Call。

### 4.2 修改分类
- [ ] **将费用ID为[某个费用ID]的分类改为餐饮**
- [ ] **更新费用ID为[某个费用ID]的分类为交通**

**预期结果**：AI应该正确更新分类。

### 4.3 修改描述
- [ ] **修改费用ID为[某个费用ID]的描述为"晚餐"**
- [ ] **更新费用ID为[某个费用ID]的描述**

**预期结果**：AI应该正确更新描述。

### 4.4 组合修改
- [ ] **修改费用ID为[某个费用ID]的记录，金额改为180元，描述改为"豪华午餐"**

**预期结果**：AI应该同时更新多个字段。

---

## 5. 删除费用功能测试

### 5.1 基础删除
- [ ] **删除费用ID为[某个费用ID]的记录**
- [ ] **移除费用ID为[某个费用ID]的费用**

**预期结果**：AI应该触发 `delete_expense` Function Call，显示确认卡片。

---

## 6. 费用统计功能测试

### 6.1 总体统计
- [ ] **查看费用统计**
- [ ] **显示总支出**
- [ ] **费用汇总**
- [ ] **当前行程花了多少钱？**

**预期结果**：AI应该基于上下文信息提供统计，或调用 `get_expense_summary`。

### 6.2 分类统计
- [ ] **查看费用分类统计**
- [ ] **各类费用占比是多少？**
- [ ] **哪个分类花费最多？**

**预期结果**：AI应该基于上下文信息提供分类统计，或调用 `get_category_stats`。

### 6.3 趋势分析
- [ ] **分析费用趋势**
- [ ] **每日费用变化**
- [ ] **本月费用趋势**

**预期结果**：AI应该调用 `analyze_expense_trends`。

---

## 7. 预算管理功能测试

### 7.1 预算查询
- [ ] **当前预算还剩多少？**
- [ ] **预算使用情况**
- [ ] **还剩多少钱？**

**预期结果**：AI应该基于上下文中的预算信息回答。

### 7.2 预算建议
- [ ] **根据当前支出，给我一些预算建议**
- [ ] **我应该如何分配预算？**

**预期结果**：AI应该基于当前费用数据提供建议。

---

## 8. 边界情况和错误处理测试

### 8.1 信息不足
- [ ] **添加费用**（没有提供金额）
- [ ] **修改费用**（没有提供费用ID）
- [ ] **删除费用**（没有提供费用ID）

**预期结果**：AI应该询问缺失的信息，而不是直接调用工具。

### 8.2 无效输入
- [ ] **添加一笔-100元的费用**（负数金额）
- [ ] **修改费用ID为invalid-id的记录**（无效ID）

**预期结果**：AI应该识别错误或后端返回错误信息。

### 8.3 模糊查询
- [ ] **查询费用**（没有指定分类或时间）
- [ ] **显示费用**（信息不完整）

**预期结果**：AI应该询问更多信息或显示所有费用。

### 8.4 复杂查询
- [ ] **查询金额大于100元的交通费用**
- [ ] **显示本月前10笔费用**

**预期结果**：AI应该尽可能理解并处理，或说明不支持的功能。

---

## 9. 对话连续性测试

### 9.1 上下文理解
- [ ] **添加一笔费用** → **修改刚才添加的那笔费用**
- [ ] **查询交通费用** → **删除第一笔交通费用**

**预期结果**：AI应该能够理解上下文中的"刚才"、"第一笔"等指代。

### 9.2 多轮对话
- [ ] **添加一笔100元的交通费用** → **确认执行** → **查询刚才添加的费用**

**预期结果**：AI应该能够处理多轮对话。

---

## 10. 确认卡片功能测试

### 10.1 确认执行
- [ ] **添加一笔费用** → 查看确认卡片 → **点击"确认执行"**

**预期结果**：费用应该成功添加，列表刷新。

### 10.2 取消操作
- [ ] **添加一笔费用** → 查看确认卡片 → **点击"取消"**

**预期结果**：操作应该被取消，费用不会添加。

### 10.3 确认卡片信息
- [ ] **检查确认卡片是否显示正确的操作类型**
- [ ] **检查确认卡片是否显示正确的参数信息**

**预期结果**：确认卡片应该清晰显示操作详情。

---

## 11. 性能测试

### 11.1 大量数据
- [ ] **在有大量费用记录（>100条）的行程中查询费用**

**预期结果**：响应时间应该在合理范围内。

### 11.2 并发请求
- [ ] **快速连续发送多个查询请求**

**预期结果**：系统应该能够处理并发请求。

---

## 12. 用户体验测试

### 12.1 响应时间
- [ ] **观察AI响应时间是否在可接受范围内（<5秒）**

### 12.2 错误提示
- [ ] **测试各种错误情况下的提示信息是否友好**

### 12.3 界面交互
- [ ] **测试确认卡片的显示和交互是否流畅**

---

## 📝 测试记录模板

```
测试日期：___________
测试人员：___________
行程ID：___________

| 问题编号 | 问题内容 | 预期结果 | 实际结果 | 状态 | 备注 |
|---------|---------|---------|---------|------|------|
| 1.1 | 你能做些什么？ | 详细介绍功能 | | | |
| 2.1 | 添加一笔100元的交通费用 | 显示确认卡片 | | | |
| ... | ... | ... | ... | ... | ... |
```

---

## 🎯 重点测试场景

### 必须测试的核心功能：
1. ✅ **添加费用** - 确保Function Call正确触发
2. ✅ **查询费用** - 确保筛选功能正常
3. ✅ **修改费用** - 确保更新功能正常
4. ✅ **删除费用** - 确保删除功能正常
5. ✅ **确认卡片** - 确保用户确认机制正常

### 建议优先测试：
- 基础功能（1.1, 2.1, 3.1, 4.1, 5.1）
- 确认卡片功能（10.1, 10.2, 10.3）
- 错误处理（8.1, 8.2）

---

## 💡 测试技巧

1. **准备测试数据**：在测试前，确保行程中有一些费用记录
2. **记录费用ID**：在测试修改/删除功能时，需要记录实际的费用ID
3. **查看控制台**：打开浏览器开发者工具，查看网络请求和错误信息
4. **查看后端日志**：观察后端日志，了解AI调用的详细过程
5. **测试边界情况**：不要只测试正常流程，也要测试异常情况

---

## 🔍 问题排查

如果遇到问题，请检查：
1. 是否选择了行程？
2. 上下文数据是否正确传递？
3. 后端日志是否有错误信息？
4. 浏览器控制台是否有错误？
5. LLM API是否正常响应？

